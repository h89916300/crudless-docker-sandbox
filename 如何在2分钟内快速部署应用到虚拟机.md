## 如何在2分钟内快速部署应用到虚拟机

> 文档假定开发需求测试**当前应用的前后端服务**，并快速部署到虚机进行测试或演示
> 应用名称为  `iot`, 服务器暴露的测试端口为8000, 数据库名称用 `test`

### 服务端则部署
> 用户登录进入虚拟机（服务器）进行部署

#### 获取docker部署模板
```shell
$ git clone https://github.com/kequandian/cloudapp-docker-starter.git  iot
```

#### 准备API安装包 iot-1.0.0-standalone.jar
> 在本地通过 scp 传至相应目录
```shell
$ ls ~/iot/api
api-1.0.0-standalone.jar
```

> 准备后台管理web项目
```shell
$ ls ~/iot/web
dist
```

#### 运行脚本进行配置
```shell
$ sh cloudapp-config.sh
Usage: cloudapp-config.sh <app> <port> <database>
Option:
    app       - Application name
    port      - Nginx port
    database  - Application database name

$ sh cloudapp-config.sh iot 8000 test
```

#### 正式部署 
```shell
$ cd ~/iot
$ docker-compose up   ## 可实时查看log
$ # docker-compose up -d  ##  后台运行
```
